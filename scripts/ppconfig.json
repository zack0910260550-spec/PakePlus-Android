{"name":"xiaoya","url":"https://777tv.ai/","showName":"xiaoya","appid":"com.xiaoya.app","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.3","preview":"Android","platform":["1-1"],"width":412,"height":915,"desc":"","jsFile":[],"filterCss":"","customJs":"/***** 1) 保留原本：所有外開連結在 App 內開 *****/\nconst hookClick = (e) => {\n  const a = e.target.closest('a[href]');\n  const baseBlank = document.querySelector('head base[target=\"_blank\"]');\n  if ((a && a.target === '_blank') || (a && baseBlank)) {\n    e.preventDefault(); location.href = a.href;\n  }\n};\nwindow.open = (url)=>{ location.href = url; };\ndocument.addEventListener('click', hookClick, { capture:true });\n\n/***** 2) TV 觀感與可點元素初始化 *****/\n(() => {\n  const css = document.createElement('style');\n  css.textContent = `\n    html,body{font-size:20px;line-height:1.5}\n    a,button,input,select,textarea,video{outline:0}\n    *:focus{box-shadow:0 0 0 3px #2ea3ff99 !important;border-radius:6px}\n    ::-webkit-scrollbar{width:0;height:0}\n    .tv-help{position:fixed;right:12px;bottom:12px;padding:6px 10px;background:#0008;color:#fff;font-size:12px;border-radius:6px}\n  `;\n  document.head.appendChild(css);\n\n  // 讓「看起來可點」的東西都能被聚焦\n  const clickableSel = 'a,button,[role=\"button\"],input,select,textarea,video';\n  document.querySelectorAll(clickableSel).forEach(el=>{\n    if (!el.hasAttribute('tabindex')) el.setAttribute('tabindex','0');\n  });\n\n  // 頁面第一次載入時，把焦點放到第一個元素\n  const first = document.querySelector(clickableSel);\n  if (first) first.focus();\n\n  // 小提示 (可刪)\n  const tip = document.createElement('div');\n  tip.className = 'tv-help';\n  tip.textContent = '↑↓頁面捲動／全螢幕時調音量｜←→ 快退/快進｜OK=點擊/播放｜返回=退出全螢幕或上一頁';\n  setTimeout(()=> tip.remove(), 5000);\n  document.body.appendChild(tip);\n})();\n\n/***** 3) 空間導覽：用方向鍵選「該方向最近的元素」 *****/\nfunction rectCenter(r){ return {x:r.left+r.width/2, y:r.top+r.height/2}; }\nfunction focusables(){\n  const sel='a,button,[role=\"button\"],input,select,textarea,[tabindex]:not([tabindex=\"-1\"]),video';\n  return Array.from(document.querySelectorAll(sel))\n    .filter(el=>{\n      const s=getComputedStyle(el);\n      const r=el.getBoundingClientRect();\n      return s.display!=='none' && s.visibility!=='hidden' && r.width>4 && r.height>4 && !el.disabled;\n    });\n}\nfunction bestInDirection(dir){\n  const list = focusables(); if(!list.length) return null;\n  const cur  = document.activeElement && list.includes(document.activeElement)\n               ? document.activeElement : null;\n  const cb   = cur ? cur.getBoundingClientRect() : {left:0,top:0,width:0,height:0};\n  const c    = cur ? rectCenter(cb) : {x:window.innerWidth/2, y:window.innerHeight/3};\n  let best=null, bestScore=Infinity;\n  for(const el of list){\n    if (el===cur) continue;\n    const r = el.getBoundingClientRect(), p = rectCenter(r);\n    const dx = p.x - c.x, dy = p.y - c.y;\n    // 方向過濾\n    if (dir==='right' && dx<=4) continue;\n    if (dir==='left'  && dx>=-4) continue;\n    if (dir==='down'  && dy<=4) continue;\n    if (dir==='up'    && dy>=-4) continue;\n    // 分數：方向夠正 + 距離近\n    const ang = Math.atan2(Math.abs(dir==='left'||dir==='right'?dy:dx), Math.abs(dir==='left'||dir==='right'?dx:dy));\n    const dist = Math.hypot(dx,dy);\n    const score = ang*200 + dist; // 角度越小越好，其次距離\n    if (score < bestScore) { bestScore=score; best=el; }\n  }\n  return best;\n}\nfunction move(dir){\n  const target = bestInDirection(dir);\n  if (target){\n    target.focus(); target.scrollIntoView({block:'center', inline:'center', behavior:'smooth'});\n  }else{\n    // 沒有更好的目標時 → 捲動頁面\n    const dy = (dir==='down'?1:dir==='up'?-1:0)*window.innerHeight*0.6;\n    if (dy) window.scrollBy({top:dy, behavior:'smooth'});\n  }\n}\n\n/***** 4) 影片輔助：自動播放/全螢幕、快進快退、長按 *****/\nfunction video(){ return document.querySelector('video'); }\nfunction autoPlayFull(){\n  const v = video(); if(!v) return;\n  const go = ()=>{ v.play().catch(()=>{}); v.requestFullscreen?.().catch(()=>{}); };\n  (v.readyState>=2)?go():v.addEventListener('canplay', go, {once:true});\n}\ndocument.addEventListener('DOMContentLoaded', autoPlayFull);\n\n// 長按左右連續快轉\nlet seekTimer=null;\nfunction startSeek(delta){\n  stopSeek();\n  seekTimer=setInterval(()=>{\n    const v=video(); if(v&&document.fullscreenElement){ v.currentTime = Math.max(0, Math.min((v.currentTime||0)+delta, v.duration||1)); }\n  }, 200);\n}\nfunction stopSeek(){ if(seekTimer){ clearInterval(seekTimer); seekTimer=null; }}\n\n/***** 5) 遙控器鍵位 *****/\ndocument.addEventListener('keydown', (e)=>{\n  const v = video();\n  const tag = (document.activeElement && document.activeElement.tagName) || '';\n  const typing = /INPUT|TEXTAREA|SELECT/.test(tag);\n\n  if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','Enter','Backspace','Escape',' '].includes(e.key)) e.preventDefault();\n\n  if (e.key==='ArrowRight'){\n    if (v && document.fullscreenElement){ v.currentTime = Math.min((v.currentTime||0)+10, v.duration||1); }\n    else move('right');\n  }\n  else if (e.key==='ArrowLeft'){\n    if (v && document.fullscreenElement){ v.currentTime = Math.max(0,(v.currentTime||0)-10); }\n    else move('left');\n  }\n  else if (e.key==='ArrowDown'){\n    if (v && document.fullscreenElement){ v.volume=Math.max(0,Math.min(1,(v.volume||0.8)-0.05)); }\n    else move('down');\n  }\n  else if (e.key==='ArrowUp'){\n    if (v && document.fullscreenElement){ v.volume=Math.max(0,Math.min(1,(v.volume||0.8)+0.05)); }\n    else move('up');\n  }\n  else if (e.key==='Enter'){\n    if (!typing){\n      if (document.activeElement && document.activeElement.tagName==='VIDEO'){ v && (v.paused ? v.play().catch(()=>{}) : v.pause()); }\n      else { document.activeElement?.click(); }\n    }\n  }\n  else if (e.key===' ' && v){ v.paused ? v.play().catch(()=>{}) : v.pause(); }\n  else if (e.key==='Escape' || e.key==='Backspace'){\n    if (document.fullscreenElement){ document.exitFullscreen().catch(()=>{}); }\n    else if (history.length>1){ history.back(); }\n  }\n\n  // 數字鍵 0~9：跳指定百分比\n  if (/^[0-9]$/.test(e.key) && v && v.duration){\n    v.currentTime = v.duration * (parseInt(e.key,10)/10);\n  }\n}, true);\n\n// 監聽長按左右\ndocument.addEventListener('keydown', (e)=>{\n  if (e.repeat && (e.key==='ArrowLeft' || e.key==='ArrowRight')){\n    startSeek(e.key==='ArrowRight'?+2:-2); // 長按加速：每 0.2s 跳 2s\n  }\n});\ndocument.addEventListener('keyup', (e)=>{\n  if (e.key==='ArrowLeft' || e.key==='ArrowRight') stopSeek();\n});\n\n/***** 6) 強制把 target=_blank 轉成 _self（避免外跳） *****/\ndocument.addEventListener('DOMContentLoaded', ()=>{\n  document.querySelectorAll('a[target=\"_blank\"]').forEach(a=>a.setAttribute('target','_self'));\n});\n","isHtml":false,"htmlPath":"","htmlFiles":[],"more":{"windows":{"label":"","title":"","url":"https://777tv.ai/","userAgent":"Mozilla/5.0 (Linux; Android 14; Pixel 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36","width":1920,"height":1080,"theme":null,"resizable":false,"fullscreen":true,"maximized":false,"minWidth":1920,"minHeight":1080,"maxWidth":1920,"maxHeight":1080,"decorations":false,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"additionalBrowserArgs":"--enable-features=OverlayScrollbar,MediaSessionService --disable-features=Translate,AutofillServerCommunication --autoplay-policy=no-user-gesture-required"}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"xiaoya","showName":"xiaoya","version":"0.0.3","webUrl":"https://777tv.ai/","id":"com.xiaoya.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"android":{"name":"xiaoya","showName":"xiaoya","version":"0.0.3","webUrl":"https://777tv.ai/","id":"com.xiaoya.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"desktop":{"name":"xiaoya","showName":"xiaoya","version":"0.0.3","id":"com.xiaoya.app.desktop","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","webUrl":"https://777tv.ai/","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"local","debug":false}}